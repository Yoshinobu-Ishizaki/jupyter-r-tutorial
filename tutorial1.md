# Jupyter+R, RStudio説明

石崎 2020/02/19

# TOC 

- [Jupyter+R, RStudio説明](#jupyterr-rstudio%e8%aa%ac%e6%98%8e)
- [TOC](#toc)
- [Topics](#topics)
  - [はじめに](#%e3%81%af%e3%81%98%e3%82%81%e3%81%ab)
  - [分析PCへの接続法、切断法](#%e5%88%86%e6%9e%90pc%e3%81%b8%e3%81%ae%e6%8e%a5%e7%b6%9a%e6%b3%95%e5%88%87%e6%96%ad%e6%b3%95)
  - [ファイル、フォルダの操作](#%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%83%95%e3%82%a9%e3%83%ab%e3%83%80%e3%81%ae%e6%93%8d%e4%bd%9c)
  - [Jupyter+Rの説明（サンプルのデータ処理、プロット）](#jupyterr%e3%81%ae%e8%aa%ac%e6%98%8e%e3%82%b5%e3%83%b3%e3%83%97%e3%83%ab%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e5%87%a6%e7%90%86%e3%83%97%e3%83%ad%e3%83%83%e3%83%88)
  - [できた文書のダウンロード](#%e3%81%a7%e3%81%8d%e3%81%9f%e6%96%87%e6%9b%b8%e3%81%ae%e3%83%80%e3%82%a6%e3%83%b3%e3%83%ad%e3%83%bc%e3%83%89)
  - [RStudioの説明](#rstudio%e3%81%ae%e8%aa%ac%e6%98%8e)
  - [Rについて](#r%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6)
  - [Jupyterhubについて](#jupyterhub%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6)
  - [質疑応答](#%e8%b3%aa%e7%96%91%e5%bf%9c%e7%ad%94)


# Topics

## はじめに

- 分析用サーバーはJupyter, RStudioを個人PCにインストールすることなく使う為のもの。
- Jupyter, RStudioの紹介的な面があり、本格使用するならPCにインストールするのが望ましい。
- サーバーデータにバックアップは入れてない。データ等のバックアップは各自で行う。

## 分析PCへの接続法、切断法

### Jupyterhubの場合(通常)

WEBブラウザから
http://133.176.4.2
にアクセス。

ログインを求められたら、ご自分のIDとパスワード（初回入力時のもので確定）でログイン。

切断は、タブを閉じるかLogoutボタン。
10分間操作しないとサーバーは自動的に休止する。

Jupyterノートブックを閉じるときはFile->Close and Halt

### 通常Jupyterの場合(オプション)

WEBブラウザから
http://133.176.4.2:8888
にアクセス。
ログインを求められたら、05619。

切断は、タブを閉じるかLogoutボタン。
タブを閉じただけだとサーバー側の処理は続いてしまうので、サーバーの負荷を抑えるにはLogoutが良い。

Jupyterノートブックを閉じるときはFile->Close and Halt

まずは個人のフォルダを作る。日本語もOKのハズだが、英字（スペースは除く）にしておくほうが無難。

## ファイル、フォルダの操作

ファイルパスがアルファベットじゃないと動作しないプログラムが時々ある。

Filesのタブでボタン New -> Folder

Untitled folderが出来るので、□をチェックしてRename。

サンプルファイルをgithubに入れてあるので、

```
git clone https://github.com/Yoshinobu-Ishizaki/jupyter-r-tutorial.git
```

## Jupyter+Rの説明（サンプルのデータ処理、プロット）

- Jupyter notebookの説明
- Excelのファイルをアップロードする。
- ノートブックをRカーネルで作成。
- 文書を書きながらRのコマンドを実行して分析したりプロットしたり。
- 図をアップロードして、文書に差し込む。

## できた文書のダウンロード

File -> Download as -> HTML

自分のPCにHTML化したファイルがダウンロードされるので、それを必要に応じて配布したりする。

プロットしたグラフの画像だけがほしい場合などはスクリーンショットを撮っても良いが、HTML with tocとすると、文書と図が別となりzipで固められてダウンロードされるので、それを使う手もある。

## RStudioの説明

http://133.176.4.2:8787

サンプルとしてishizaki/tutorial1を参照。

1度に1人しか使えないので、非推奨ではある。

ユーザーアカウントを個々に作れば複数人でアクセス可能になるが、そこまでやるぐらいなら
各人がR,RStudioをPCにインストールしてしまうのが良い。

RStudio全般として、残念ながらパスが日本語を含むと上手く動作しないので、その点に気を使う必要あり。

出力されるHTMLのできが良いことと、Rとの連携がJupyterよりも遥かに良いので、Rをがっつり使うならRStudioで使いたいところ。

pythonでもデータ分析したい場合は基本的にJupyterで作業することになるだろうから、Jupyterに慣れておく意味でも、Jupyter+Rで作業するのが良いだろう。

## Rについて

Rにどんなコマンドがあるのか、コマンドの使い方などについては、`R キーワード`でググると結構情報が出てくる。

または、`?command`で確認する（英語だが）。

## 他のクラウド環境

- [Azure Jupyter Notebook](https://notebooks.azure.com/)
- [Google Colaboratory](https://colab.research.google.com/notebooks/welcome.ipynb?hl=ja) (Rを使うには起動にちょっとコツがいる)

## 質疑応答

随時受け付けます。



